<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>RideBuddy | Edit Ride</title>
  <link rel="icon" type="image/x-icon" href="/photos/rideBuddy-icon.ico">
  <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  />
  <style>
    .container {
      max-width: 1000px;
      margin-top: 2rem;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .btn {
      width: 100%;
    }

  </style>
</head>
<body>
<div th:replace="fragments/navbar :: navbar(user=${user})"></div>
<div class="container">

  <h2 class="text-center mb-4">Edit Ride Offer</h2>

  <!-- Form to edit a ride -->
  <form id="rideForm" th:action="@{/rides/manage/edit/{id}(id=${RideDTO.id_ride})}" th:object="${RideDTO}" method="post">

  <!-- Hidden input for Ride ID -->
    <input type="hidden" th:field="*{id_ride}" />
    <div class="form-group">
      <label for="departureLocation">Departure Location</label>
      <input type="text" id="departureLocation" th:field="*{departureLocation}" class="form-control" required />
    </div>

    <div class="form-group">
      <label class="col-sm-4 col-form-label">Start Governorate</label>
      <div class="col-sm-8">
        <select class="form-select" th:field="*{statGov}">
          <option value="" th:text="'Select a Governorate'" disabled></option>
          <option value="Tunis" th:selected="${RideDTO.statGov == 'Tunis'}">Tunis</option>
          <option value="Ariana" th:selected="${RideDTO.statGov == 'Ariana'}">Ariana</option>
          <option value="Beja" th:selected="${RideDTO.statGov == 'Beja'}">Beja</option>
          <option value="Ben Arous" th:selected="${RideDTO.statGov == 'Ben Arous'}">Ben Arous</option>
          <option value="Bizerte" th:selected="${RideDTO.statGov == 'Bizerte'}">Bizerte</option>
          <option value="Gabes" th:selected="${RideDTO.statGov == 'Gabes'}">Gabes</option>
          <option value="Gafsa" th:selected="${RideDTO.statGov == 'Gafsa'}">Gafsa</option>
          <option value="Jendouba" th:selected="${RideDTO.statGov == 'Jendouba'}">Jendouba</option>
          <option value="Kairouan" th:selected="${RideDTO.statGov == 'Kairouan'}">Kairouan</option>
          <option value="Kasserine" th:selected="${RideDTO.statGov == 'Kasserine'}">Kasserine</option>
          <option value="Kebili" th:selected="${RideDTO.statGov == 'Kebili'}">Kebili</option>
          <option value="Kef" th:selected="${RideDTO.statGov == 'Kef'}">Kef</option>
          <option value="Mahdia" th:selected="${RideDTO.statGov == 'Mahdia'}">Mahdia</option>
          <option value="Manouba" th:selected="${RideDTO.statGov == 'Manouba'}">Manouba</option>
          <option value="Medenine" th:selected="${RideDTO.statGov == 'Medenine'}">Medenine</option>
          <option value="Monastir" th:selected="${RideDTO.statGov == 'Monastir'}">Monastir</option>
          <option value="Nabeul" th:selected="${RideDTO.statGov == 'Nabeul'}">Nabeul</option>
          <option value="Sfax" th:selected="${RideDTO.statGov == 'Sfax'}">Sfax</option>
          <option value="Sidi Bouzid" th:selected="${RideDTO.statGov == 'Sidi Bouzid'}">Sidi Bouzid</option>
          <option value="Siliana" th:selected="${RideDTO.statGov == 'Siliana'}">Siliana</option>
          <option value="Sousa" th:selected="${RideDTO.statGov == 'Sousa'}">Sousa</option>
          <option value="Tataouine" th:selected="${RideDTO.statGov == 'Tataouine'}">Tataouine</option>
          <option value="Tozeur" th:selected="${RideDTO.statGov == 'Tozeur'}">Tozeur</option>
          <option value="Zaghouan" th:selected="${RideDTO.statGov == 'Zaghouan'}">Zaghouan</option>
        </select>
        <p th:if="${#fields.hasErrors('statGov')}"
           th:errorclass="text-danger"
           th:errors="${RideDTO.statGov}"></p>
      </div>
    </div>


    <div class="form-group">
      <label for="departureDate">Departure Date</label>
      <input type="date" id="departureDate" th:field="*{departureDate}" class="form-control" required />
    </div>


    <div class="form-group">
      <label for="departureTime">Departure Time</label>
      <input type="time" id="departureTime" th:field="*{departureTime}" class="form-control" required />
    </div>

    <div class="form-group">
      <label for="destination">Destination</label>
      <input type="text" id="destination" th:field="*{destination}" class="form-control" required />
    </div>

    <div class="form-group">
      <label class="col-sm-4 col-form-label">Destination Governorate</label>
      <div class="col-sm-8">
        <select class="form-select" th:field="*{endGov}">
          <option value="" th:text="'Select a Governorate'" disabled></option>
          <option value="Tunis" th:selected="*{endGov == 'Tunis'}">Tunis</option>
          <option value="Ariana" th:selected="*{endGov == 'Ariana'}">Ariana</option>
          <option value="Beja" th:selected="*{endGov == 'Beja'}">Beja</option>
          <option value="Ben Arous" th:selected="*{endGov == 'Ben Arous'}">Ben Arous</option>
          <option value="Bizerte" th:selected="*{endGov == 'Bizerte'}">Bizerte</option>
          <option value="Gabes" th:selected="*{endGov == 'Gabes'}">Gabes</option>
          <option value="Gafsa" th:selected="*{endGov == 'Gafsa'}">Gafsa</option>
          <option value="Jendouba" th:selected="*{endGov == 'Jendouba'}">Jendouba</option>
          <option value="Kairouan" th:selected="*{endGov == 'Kairouan'}">Kairouan</option>
          <option value="Kasserine" th:selected="*{endGov == 'Kasserine'}">Kasserine</option>
          <option value="Kebili" th:selected="*{endGov == 'Kebili'}">Kebili</option>
          <option value="Kef" th:selected="*{endGov == 'Kef'}">Kef</option>
          <option value="Mahdia" th:selected="*{endGov == 'Mahdia'}">Mahdia</option>
          <option value="Manouba" th:selected="*{endGov == 'Manouba'}">Manouba</option>
          <option value="Medenine" th:selected="*{endGov == 'Medenine'}">Medenine</option>
          <option value="Monastir" th:selected="*{endGov == 'Monastir'}">Monastir</option>
          <option value="Nabeul" th:selected="*{endGov == 'Nabeul'}">Nabeul</option>
          <option value="Sfax" th:selected="*{endGov == 'Sfax'}">Sfax</option>
          <option value="Sidi Bouzid" th:selected="*{endGov == 'Sidi Bouzid'}">Sidi Bouzid</option>
          <option value="Siliana" th:selected="*{endGov == 'Siliana'}">Siliana</option>
          <option value="Sousa" th:selected="*{endGov == 'Sousa'}">Sousa</option>
          <option value="Tataouine" th:selected="*{endGov == 'Tataouine'}">Tataouine</option>
          <option value="Tozeur" th:selected="*{endGov == 'Tozeur'}">Tozeur</option>
          <option value="Zaghouan" th:selected="*{endGov == 'Zaghouan'}">Zaghouan</option>
        </select>
        <p th:if="${#fields.hasErrors('endGov')}"
           th:errorclass="text-danger"
           th:errors="${RideDTO.endGov}"></p>
      </div>
    </div>


    <div class="form-group">
      <label for="availablePlaces">Available Places</label>
      <input type="number" id="availablePlaces" th:field="*{availablePlaces}" class="form-control" required />
    </div>

    <div class="form-group">
      <label for="pricePerSeat">Price Per Seat</label>
      <input type="number" step="1.00" id="pricePerSeat" th:field="*{pricePerSeat}" class="form-control" required />
    </div>

    <div class="form-group">
      <label for="comments">Comments</label>
      <textarea id="comments" th:field="*{comments}" class="form-control" rows="3" placeholder="E.g., no pets, non-smoking"></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Update Ride</button>
  </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
